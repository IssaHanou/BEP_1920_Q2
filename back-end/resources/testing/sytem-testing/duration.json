{
  "general": {
    "name": "Duration test",
    "duration": "12h",
    "host": "192.168.0.103",
    "port": 1883
  },
  "cameras": [],
  "devices": [
    {
      "description": "test device",
      "id": "pinger1",
      "input": {
        "avg": "string",
        "min": "string",
        "max": "string",
        "#pong": "numeric"
      },
      "output": {
        "#ping": {
          "instructions": {
            "pong": "boolean"
          },
          "type": "numeric"
        },
        "pinging": {
          "instructions": {
            "pinging": "boolean"
          },
          "type": "boolean",
          "label": [
            "ping"
          ]
        }
      }
    },
    {
      "description": "test device",
      "id": "pinger2",
      "input": {
        "avg": "string",
        "min": "string",
        "max": "string",
        "#pong": "numeric"
      },
      "output": {
        "#ping": {
          "instructions": {
            "pong": "boolean"
          },
          "type": "numeric"
        },
        "pinging": {
          "instructions": {
            "pinging": "boolean"
          },
          "type": "boolean",
          "label": [
            "ping"
          ]
        }
      }
    },
    {
      "description": "test device",
      "id": "pinger3",
      "input": {
        "avg": "string",
        "min": "string",
        "max": "string",
        "#pong": "numeric"
      },
      "output": {
        "#ping": {
          "instructions": {
            "pong": "boolean"
          },
          "type": "numeric"
        },
        "pinging": {
          "instructions": {
            "pinging": "boolean"
          },
          "type": "boolean",
          "label": [
            "ping"
          ]
        }
      }
    },
    {
      "description": "test device",
      "id": "pinger4",
      "input": {
        "avg": "string",
        "min": "string",
        "max": "string",
        "#pong": "numeric"
      },
      "output": {
        "#ping": {
          "instructions": {
            "pong": "boolean"
          },
          "type": "numeric"
        },
        "pinging": {
          "instructions": {
            "pinging": "boolean"
          },
          "type": "boolean",
          "label": [
            "ping"
          ]
        }
      }
    },
    {
      "description": "test device",
      "id": "pinger5",
      "input": {
        "avg": "string",
        "min": "string",
        "max": "string",
        "#pong": "numeric"
      },
      "output": {
        "#ping": {
          "instructions": {
            "pong": "boolean"
          },
          "type": "numeric"
        },
        "pinging": {
          "instructions": {
            "pinging": "boolean"
          },
          "type": "boolean",
          "label": [
            "ping"
          ]
        }
      }
    }
  ],
  "timers": [],
  "puzzles": [],
  "general_events": [
    {
      "name": "pinger",
      "rules": [
        {
          "id": "ponger1",
          "description": "pong when receives a ping",
          "limit": 0,
          "conditions": {
            "constraints": {
              "operator": "AND",
              "list": [
                {
                  "comparison": "gt",
                  "component_id": "#ping",
                  "value": 0
                },
                {
                  "comparison": "eq",
                  "component_id": "pinging",
                  "value": true
                }
              ]
            },
            "type": "device",
            "type_id": "pinger1"
          },
          "actions": [
            {
              "message": [
                {
                  "instruction": "pong",
                  "component_id": "#ping",
                  "value": true
                }
              ],
              "type": "device",
              "type_id": "pinger1"
            }
          ]
        },
        {
          "id": "ponger2",
          "description": "pong when receives a ping",
          "limit": 0,
          "conditions": {
            "constraints": {
              "operator": "AND",
              "list": [
                {
                  "comparison": "gt",
                  "component_id": "#ping",
                  "value": 0
                },
                {
                  "comparison": "eq",
                  "component_id": "pinging",
                  "value": true
                }
              ]
            },
            "type": "device",
            "type_id": "pinger2"
          },
          "actions": [
            {
              "message": [
                {
                  "instruction": "pong",
                  "component_id": "#ping",
                  "value": true
                }
              ],
              "type": "device",
              "type_id": "pinger2"
            }
          ]
        },
        {
          "id": "ponger3",
          "description": "pong when receives a ping",
          "limit": 0,
          "conditions": {
            "constraints": {
              "operator": "AND",
              "list": [
                {
                  "comparison": "gt",
                  "component_id": "#ping",
                  "value": 0
                },
                {
                  "comparison": "eq",
                  "component_id": "pinging",
                  "value": true
                }
              ]
            },
            "type": "device",
            "type_id": "pinger3"
          },
          "actions": [
            {
              "message": [
                {
                  "instruction": "pong",
                  "component_id": "#ping",
                  "value": true
                }
              ],
              "type": "device",
              "type_id": "pinger3"
            }
          ]
        },
        {
          "id": "ponger4",
          "description": "pong when receives a ping",
          "limit": 0,
          "conditions": {
            "constraints": {
              "operator": "AND",
              "list": [
                {
                  "comparison": "gt",
                  "component_id": "#ping",
                  "value": 0
                },
                {
                  "comparison": "eq",
                  "component_id": "pinging",
                  "value": true
                }
              ]
            },
            "type": "device",
            "type_id": "pinger4"
          },
          "actions": [
            {
              "message": [
                {
                  "instruction": "pong",
                  "component_id": "#ping",
                  "value": true
                }
              ],
              "type": "device",
              "type_id": "pinger4"
            }
          ]
        },
        {
          "id": "ponger5",
          "description": "pong when receives a ping",
          "limit": 0,
          "conditions": {
            "constraints": {
              "operator": "AND",
              "list": [
                {
                  "comparison": "gt",
                  "component_id": "#ping",
                  "value": 0
                },
                {
                  "comparison": "eq",
                  "component_id": "pinging",
                  "value": true
                }
              ]
            },
            "type": "device",
            "type_id": "pinger5"
          },
          "actions": [
            {
              "message": [
                {
                  "instruction": "pong",
                  "component_id": "#ping",
                  "value": true
                }
              ],
              "type": "device",
              "type_id": "pinger5"
            }
          ]
        }
      ]
    }
  ],
  "button_events": [
    {
      "id": "start",
      "description": "Als het spel start, moeten alle rode leds aan gaan en de groene uit",
      "limit": 1,
      "conditions": {},
      "actions": [
        {
          "type": "timer",
          "type_id": "general",
          "message": [
            {
              "instruction": "start"
            }
          ]
        },
        {
          "type": "device",
          "type_id": "front-end",
          "message": [
            {
              "instruction": "set state",
              "component_id": "gameState",
              "value": "in spel"
            }
          ]
        },
        {
          "type": "label",
          "type_id": "ping",
          "message": [
            {
              "instruction": "pinging",
              "value": true
            }
          ]
        }
      ]
    },
    {
      "id": "stop",
      "description": "Als het spel stopt, moeten alle lichten uitgaan",
      "limit": 1,
      "conditions": {
        "operator": "OR",
        "list": [
          {
            "type": "device",
            "type_id": "front-end",
            "constraints": {
              "component_id": "gameState",
              "comparison": "eq",
              "value": "in spel"
            }
          },
          {
            "type": "device",
            "type_id": "front-end",
            "constraints": {
              "component_id": "gameState",
              "comparison": "eq",
              "value": "gepauzeerd"
            }
          }
        ]
      },
      "actions": [
        {
          "type": "timer",
          "type_id": "general",
          "message": [
            {
              "instruction": "stop"
            }
          ]
        },
        {
          "type": "device",
          "type_id": "front-end",
          "message": [
            {
              "instruction": "set state",
              "component_id": "gameState",
              "value": "gestopt"
            }
          ]
        },
        {
          "type": "label",
          "type_id": "ping",
          "message": [
            {
              "instruction": "pinging",
              "value": false
            }
          ]
        }
      ]
    }
  ]
}
